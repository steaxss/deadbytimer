/* === Default Theme (ajustée) === */
:root {
    /* fondu latéral pour une coupe propre du texte (appliqué sur la piste, pas sur le fond) */
    --edge-fade: 10px;
    /* === nouvelles variables thème === */
    /* fond des .name (players) */
    --name-bg: linear-gradient(90deg, #4B4B4B 0%, #3A3A3A 50%, #3A3A3A 100%);
    /* accent commun : fond du score + swap bar */
    --accent-gradient: linear-gradient(90deg, #274B90 0.06%, #09327E 40.01%, #04296F 79.97%);
    /* halo par défaut pour texte clair */
    --name-glow: 0 0 6px rgba(255,255,255,0.50);
    --name-stroke: 0px transparent;
  }

.timer-overlay {
  display: grid;
  grid-template-columns: minmax(160px, 1fr) auto minmax(160px, 1fr);
  grid-template-rows: 50px 1fr;
  width: 520px;
  height: 120px;
  position: relative;
  contain: content;
}

.drag-handle {
  position: absolute; top: 0; left: 0; right: 0; height: 30px;
  background: linear-gradient(90deg, rgba(181,121,255,0.15) 0%, rgba(181,121,255,0.25) 50%, rgba(181,121,255,0.15) 100%);
  border-bottom: 2px solid rgba(181,121,255,0.4);
  box-shadow: 0 2px 10px rgba(181,121,255,0.3);
  display: none; align-items: center; justify-content: center;
  cursor: move; -webkit-app-region: drag;
  font-size: 0.85rem; color: #B579FF; font-weight: 600; letter-spacing: 1px; text-transform: uppercase;
  z-index: 1000;
}
.drag-handle.visible { display: flex; }

.name { padding: 0 15px; }

.name, .score-value {
  border-bottom: 1px solid rgba(255,255,255,0.32);
  background: var(--name-bg);
  display: flex; align-items: center; justify-content: center;
  font-family: "Poppins", system-ui, sans-serif;
  font-size: 22px; font-weight: 500; color: #FFF;
  position: relative; overflow: hidden;
}

.name { -webkit-text-stroke: var(--name-stroke); }

.name { color: var(--name-color, #FFF); }

.name.left {
  grid-row: 1; grid-column: 1; font-size: 24px; text-transform: uppercase;
  text-shadow: var(--name-glow);
}
.score-value {
  grid-row: 1; grid-column: 2; font-size: 24px; text-transform: uppercase;
  background: var(--accent-gradient);
  padding: 0 15px; min-width: 90px; max-width: 120px;
}
.name.right {
  grid-row: 1; grid-column: 3; font-size: 24px; text-transform: uppercase;
  text-shadow: var(--name-glow);
}

.scrolling-name{
  flex: 1 1 auto;
  min-width: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: relative;
}

.scrolling-name__inner{
  display: inline-block;
  white-space: nowrap;
  transform: translateX(0);
}

.timer {
  display: flex; align-items: center; justify-content: center;
  font-family: "Squarefont","Consolas","Monaco","Courier New",monospace;
  font-size: 32px; font-weight: 400;
  text-shadow: 0 0 6px rgba(190,190,190,0.50);
  position: relative; height: 100%; text-align: center; min-width: 160px;
}
.timer.left { grid-row: 2; grid-column: 1; }
.timer.right { grid-row: 2; grid-column: 3; }

.timer-text {
  display: inline-flex; align-items: center;
}
.timer-char {
  display: inline-block; width: 22px; text-align: center;
  background: linear-gradient(180deg, #FFF 0%, #FFF 100%);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
}
.timer-char.separator { width: 11px; }

.timer.active::before {
  content: ''; position: absolute; bottom: 0; left: 0; right: 0; height: 3px;
  background: var(--accent-gradient);
  animation: pulseBar 1s ease-in-out infinite;
}
@keyframes pulseBar { 0%,100%{opacity:.5} 50%{opacity:1} }

.dbd-digits { font-variant-numeric: tabular-nums; font-feature-settings: "tnum"; letter-spacing: 0.02em; }

/* ========= Warning states for active timer ========= */
/* 20s before loose -> orange (fixed) */
.timer.warn20 .timer-char {
  background: linear-gradient(180deg, #FFD27A 0%, #FFA726 100%);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  text-shadow: 0 0 18px rgba(255,167,38,0.35);
}

/* 10s before loose -> red + blink */
.timer.warn10 .timer-char {
  background: linear-gradient(180deg, #FF8A80 0%, #FF5252 100%);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  text-shadow: 0 0 18px rgba(255,82,82,0.35);
  animation: timerBlink 0.8s steps(1,end) infinite;
}
@keyframes timerBlink {
  50% { opacity: .45; }
}

/* Winning condition -> green with shimmer effect */
.timer.winning .timer-char {
  background: linear-gradient(180deg, #4ade80 0%, #22c55e 100%);
  -webkit-background-clip: text; background-clip: text; -webkit-text-fill-color: transparent;
  text-shadow: 0 0 20px rgba(34,197,94,0.50);
  animation: shimmer 2s ease-in-out infinite;
}

@keyframes shimmer {
  0%, 100% {
    filter: brightness(1) drop-shadow(0 0 8px rgba(34,197,94,0.4));
  }
  50% {
    filter: brightness(1.3) drop-shadow(0 0 16px rgba(34,197,94,0.7));
  }
}
